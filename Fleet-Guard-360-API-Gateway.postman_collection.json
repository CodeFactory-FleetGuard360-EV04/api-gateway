{
	"info": {
		"_postman_id": "9b216d02-b0a7-4c87-8e6f-168cbef0920c",
		"name": "Fleet Guard 360 - API Gateway Collection",
		"description": "Colecci√≥n completa para la API Gateway de Fleet Guard 360. Incluye autenticaci√≥n y acceso a microservicios.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "37574367"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{jwt_token}}",
				"type": "string"
			}
		]
	},
	"item": [
		{
			"name": "üîê Authentication",
			"item": [
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const responseJson = pm.response.json();",
									"    if (responseJson.jwt) {",
									"        pm.collectionVariables.set('jwt_token', responseJson.jwt);",
									"        console.log('JWT Token saved:', responseJson.jwt);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{user_email}}\",\n    \"password\": \"{{user_password}}\"\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/auth/login",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						},
						"description": "Autenticaci√≥n de usuario para obtener JWT token"
					},
					"response": []
				}
			],
			"description": "Endpoints de autenticaci√≥n - No requieren token JWT"
		},
		{
			"name": "üè∑Ô∏è Nivel Prioridad",
			"item": [
				{
					"name": "Query - Obtener Nivel Prioridad por ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query GetNivelPrioridadById($id: Int!) {\\n  nivelPrioridad(id: $id) {\\n    id\\n    nombre\\n  }\\n}\",\n  \"variables\": {\n    \"id\": 1\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Query - Obtener Todos los Niveles de Prioridad",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query GetAllNivelesPrioridad {\\n  nivelesPrioridad {\\n    id\\n    nombre\\n  }\\n}\"\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Crear Nivel Prioridad Cr√≠tica",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateNivelPrioridad($input: NivelPrioridadCreateInput!) {\\n  createNivelPrioridad(input: $input) {\\n    id\\n    nombre\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Cr√≠tica\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Crear Nivel Prioridad Alta",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateNivelPrioridad($input: NivelPrioridadCreateInput!) {\\n  createNivelPrioridad(input: $input) {\\n    id\\n    nombre\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Alta\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Crear Nivel Prioridad Media",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateNivelPrioridad($input: NivelPrioridadCreateInput!) {\\n  createNivelPrioridad(input: $input) {\\n    id\\n    nombre\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Media\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Crear Nivel Prioridad Baja",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateNivelPrioridad($input: NivelPrioridadCreateInput!) {\\n  createNivelPrioridad(input: $input) {\\n    id\\n    nombre\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Baja\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Actualizar Nivel Prioridad",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation UpdateNivelPrioridad($id: Int!, $input: NivelPrioridadUpdateInput!) {\\n  updateNivelPrioridad(id: $id, input: $input) {\\n    id\\n    nombre\\n  }\\n}\",\n  \"variables\": {\n    \"id\": 1,\n    \"input\": {\n      \"nombre\": \"Cr√≠tica Actualizada\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Eliminar Nivel Prioridad",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation DeleteNivelPrioridad($id: Int!) {\\n  deleteNivelPrioridad(id: $id)\\n}\",\n  \"variables\": {\n    \"id\": 4\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üö® Tipo Alerta - Configuraci√≥n Completa",
			"item": [
				{
					"name": "Query - Obtener Tipo Alerta por ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query GetTipoAlertaById($id: Int!) {\\n  tipoAlerta(id: $id) {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      id\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\",\n  \"variables\": {\n    \"id\": 1\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Query - Obtener Todos los Tipos de Alerta",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query GetAllTipoAlertas {\\n  tipoAlertas {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      id\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\"\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Crear Alerta Falla Motor (Mec√°nico - Cr√≠tica)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateTipoAlerta($input: TipoAlertaCreateInput!) {\\n  createTipoAlerta(input: $input) {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      id\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Falla de Motor\",\n      \"descripcion\": \"Falla cr√≠tica del sistema de motor que requiere atenci√≥n inmediata del mec√°nico especializado\",\n      \"nivelPrioridadId\": 1,\n      \"tipoEncargado\": \"MECANICO\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Crear Alerta Exceso Velocidad (Conductor - Alta)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateTipoAlerta($input: TipoAlertaCreateInput!) {\\n  createTipoAlerta(input: $input) {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      id\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Exceso de Velocidad\",\n      \"descripcion\": \"El conductor ha superado los l√≠mites de velocidad establecidos para la ruta\",\n      \"nivelPrioridadId\": 2,\n      \"tipoEncargado\": \"CONDUCTOR\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Crear Alerta Retraso Entrega (Log√≠stica - Media)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateTipoAlerta($input: TipoAlertaCreateInput!) {\\n  createTipoAlerta(input: $input) {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      id\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Retraso en Entrega\",\n      \"descripcion\": \"El veh√≠culo presenta retrasos significativos en la ruta programada que afectan las entregas\",\n      \"nivelPrioridadId\": 3,\n      \"tipoEncargado\": \"OPERADOR_LOGISTICA\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Crear Alerta Falla Sistema (Soporte - Cr√≠tica)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateTipoAlerta($input: TipoAlertaCreateInput!) {\\n  createTipoAlerta(input: $input) {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      id\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Falla Sistema Comunicaci√≥n\",\n      \"descripcion\": \"Problemas cr√≠ticos de conectividad o comunicaci√≥n con el sistema central de monitoreo\",\n      \"nivelPrioridadId\": 1,\n      \"tipoEncargado\": \"SOPORTE_TECNICO\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Crear Alerta Zona Restringida (Seguridad - Alta)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateTipoAlerta($input: TipoAlertaCreateInput!) {\\n  createTipoAlerta(input: $input) {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      id\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Acceso Zona Restringida\",\n      \"descripcion\": \"El veh√≠culo ha ingresado a una zona no autorizada o de acceso restringido\",\n      \"nivelPrioridadId\": 2,\n      \"tipoEncargado\": \"SEGURIDAD\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Crear Alerta Mantenimiento (Mec√°nico - Media)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateTipoAlerta($input: TipoAlertaCreateInput!) {\\n  createTipoAlerta(input: $input) {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      id\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Mantenimiento Preventivo\",\n      \"descripcion\": \"El veh√≠culo requiere mantenimiento preventivo programado seg√∫n intervalos establecidos\",\n      \"nivelPrioridadId\": 3,\n      \"tipoEncargado\": \"MECANICO\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Actualizar Tipo Alerta",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation UpdateTipoAlerta($id: Int!, $input: TipoAlertaUpdateInput!) {\\n  updateTipoAlerta(id: $id, input: $input) {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      id\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\",\n  \"variables\": {\n    \"id\": 1,\n    \"input\": {\n      \"descripcion\": \"Falla cr√≠tica del sistema de motor - Descripci√≥n actualizada con mayor detalle\",\n      \"nivelPrioridadId\": 1\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Cambiar Encargado de Alerta",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation UpdateTipoAlerta($id: Int!, $input: TipoAlertaUpdateInput!) {\\n  updateTipoAlerta(id: $id, input: $input) {\\n    id\\n    nombre\\n    tipoEncargado\\n    nivelPrioridad {\\n      nombre\\n    }\\n  }\\n}\",\n  \"variables\": {\n    \"id\": 2,\n    \"input\": {\n      \"tipoEncargado\": \"SEGURIDAD\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mutation - Eliminar Tipo Alerta",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation DeleteTipoAlerta($id: Int!) {\\n  deleteTipoAlerta(id: $id)\\n}\",\n  \"variables\": {\n    \"id\": 6\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üß™ Casos de Prueba y Validaciones",
			"item": [
				{
					"name": "Error - Crear Tipo Alerta con Nivel Inexistente",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateTipoAlerta($input: TipoAlertaCreateInput!) {\\n  createTipoAlerta(input: $input) {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      id\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Prueba Error\",\n      \"descripcion\": \"Esta prueba debe fallar por nivelPrioridadId inexistente\",\n      \"nivelPrioridadId\": 999,\n      \"tipoEncargado\": \"MECANICO\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Error - Crear Tipo Alerta Duplicado",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateTipoAlerta($input: TipoAlertaCreateInput!) {\\n  createTipoAlerta(input: $input) {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      id\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Falla de Motor\",\n      \"descripcion\": \"Este nombre ya debe existir\",\n      \"nivelPrioridadId\": 1,\n      \"tipoEncargado\": \"MECANICO\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Error - Buscar Tipo Alerta Inexistente",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query GetTipoAlertaById($id: Int!) {\\n  tipoAlerta(id: $id) {\\n    id\\n    nombre\\n    descripcion\\n  }\\n}\",\n  \"variables\": {\n    \"id\": 999\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Error - Crear Nivel Prioridad Duplicado",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateNivelPrioridad($input: NivelPrioridadCreateInput!) {\\n  createNivelPrioridad(input: $input) {\\n    id\\n    nombre\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Cr√≠tica\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Validaci√≥n - Tipo Encargado Inv√°lido",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CreateTipoAlerta($input: TipoAlertaCreateInput!) {\\n  createTipoAlerta(input: $input) {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      id\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Prueba Enum Inv√°lido\",\n      \"descripcion\": \"Esta prueba debe fallar por enum inv√°lido\",\n      \"nivelPrioridadId\": 1,\n      \"tipoEncargado\": \"ADMINISTRADOR\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Error - Acceso sin Token JWT",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query GetAllNivelesPrioridad {\\n  nivelesPrioridad {\\n    id\\n    nombre\\n  }\\n}\"\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						},
						"description": "Esta prueba debe fallar con error de autenticaci√≥n"
					},
					"response": []
				}
			]
		},
		{
			"name": "üìä Consultas Completas y Reportes",
			"item": [
				{
					"name": "Query - Reporte Completo del Sistema",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query ReporteCompletoSistema {\\n  nivelesPrioridad {\\n    id\\n    nombre\\n  }\\n  \\n  tipoAlertas {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      id\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\"\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Query - Solo Alertas de Prioridad Cr√≠tica",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query AlertasPrioridadCritica {\\n  tipoAlertas {\\n    id\\n    nombre\\n    descripcion\\n    nivelPrioridad {\\n      nombre\\n    }\\n    tipoEncargado\\n  }\\n}\"\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Query - Alertas por Tipo de Encargado",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query AlertasPorEncargado {\\n  tipoAlertas {\\n    id\\n    nombre\\n    tipoEncargado\\n    nivelPrioridad {\\n      nombre\\n    }\\n  }\\n}\"\n}"
						},
						"url": {
							"raw": "{{gateway_url}}/alerts/graphql",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"alerts",
								"graphql"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					"// Auto-incluir Authorization header si existe jwt_token",
					"const token = pm.collectionVariables.get('jwt_token');",
					"if (token && !pm.request.headers.has('Authorization')) {",
					"    pm.request.headers.add({",
					"        key: 'Authorization',",
					"        value: 'Bearer ' + token",
					"    });",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					"// Validar respuestas y mostrar informaci√≥n √∫til",
					"if (pm.response.code === 401) {",
					"    console.log('üö´ Error de autenticaci√≥n - Verifica tu JWT token');",
					"} else if (pm.response.code === 403) {",
					"    console.log('üö´ Acceso denegado - Verifica permisos');",
					"} else if (pm.response.code >= 400) {",
					"    console.log('‚ùå Error en la petici√≥n:', pm.response.code);",
					"} else if (pm.response.code === 200) {",
					"    console.log('‚úÖ Petici√≥n exitosa');",
					"}",
					"",
					"// Mostrar tiempo de respuesta",
					"console.log('‚è±Ô∏è Tiempo de respuesta:', pm.response.responseTime + 'ms');"
				]
			}
		}
	],
	"variable": [
		{
			"key": "gateway_url",
			"value": "http://localhost:8085",
			"type": "string",
			"description": "URL del API Gateway"
		},
		{
			"key": "jwt_token",
			"value": "",
			"type": "string",
			"description": "JWT Token obtenido del login (se auto-completa)"
		},
		{
			"key": "user_email",
			"value": "user@example.com",
			"type": "string",
			"description": "Email del usuario para login"
		},
		{
			"key": "user_password",
			"value": "password123",
			"type": "string",
			"description": "Password del usuario para login"
		}
	]
}

